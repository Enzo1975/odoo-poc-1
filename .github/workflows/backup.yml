name: Odoo Backup

# Trigger di esecuzione del workflow
on:
  workflow_dispatch: {}
  schedule:
    - cron: '0 2 * * *' # Esecuzione programmata (ogni giorno alle 2:00 AM)
  
jobs:
    backup:
      runs-on: ubuntu-latest
      
      steps:
        - name: Checkout repository
          uses: actions/checkout@v2
        
        - name: Connesione al server....
          uses: appleboy/ssh-action@master
          with:
              host: ${{ secrets.SERVER_IP }} 
              username: ${{ secrets.SERVER_USER }}
              key: ${{ secrets.SSH_PRIVATE_KEY }} 
              script: |
                echo "Connessione riuscita"

                echo "Chiusura connessione"
                exit
                echo "Connessione chiusa"
                echo "Fine del processo"
                exit